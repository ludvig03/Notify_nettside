{"ast":null,"code":"import { Matrix4, Object3D, Vector3 } from 'three';\n\nclass CSS2DObject extends Object3D {\n  constructor() {\n    let element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.createElement('div');\n    super();\n    this.isCSS2DObject = true;\n    this.element = element;\n    this.element.style.position = 'absolute';\n    this.element.style.userSelect = 'none';\n    this.element.setAttribute('draggable', false);\n    this.addEventListener('removed', function () {\n      this.traverse(function (object) {\n        if (object.element instanceof Element && object.element.parentNode !== null) {\n          object.element.parentNode.removeChild(object.element);\n        }\n      });\n    });\n  }\n\n  copy(source, recursive) {\n    super.copy(source, recursive);\n    this.element = source.element.cloneNode(true);\n    return this;\n  }\n\n} //\n\n\nconst _vector = new Vector3();\n\nconst _viewMatrix = new Matrix4();\n\nconst _viewProjectionMatrix = new Matrix4();\n\nconst _a = new Vector3();\n\nconst _b = new Vector3();\n\nclass CSS2DRenderer {\n  constructor() {\n    let parameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    const _this = this;\n\n    let _width, _height;\n\n    let _widthHalf, _heightHalf;\n\n    const cache = {\n      objects: new WeakMap()\n    };\n    const domElement = parameters.element !== undefined ? parameters.element : document.createElement('div');\n    domElement.style.overflow = 'hidden';\n    this.domElement = domElement;\n\n    this.getSize = function () {\n      return {\n        width: _width,\n        height: _height\n      };\n    };\n\n    this.render = function (scene, camera) {\n      if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld();\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld();\n\n      _viewMatrix.copy(camera.matrixWorldInverse);\n\n      _viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, _viewMatrix);\n\n      renderObject(scene, scene, camera);\n      zOrder(scene);\n    };\n\n    this.setSize = function (width, height) {\n      _width = width;\n      _height = height;\n      _widthHalf = _width / 2;\n      _heightHalf = _height / 2;\n      domElement.style.width = width + 'px';\n      domElement.style.height = height + 'px';\n    };\n\n    function renderObject(object, scene, camera) {\n      if (object.isCSS2DObject) {\n        _vector.setFromMatrixPosition(object.matrixWorld);\n\n        _vector.applyMatrix4(_viewProjectionMatrix);\n\n        const visible = object.visible === true && _vector.z >= -1 && _vector.z <= 1 && object.layers.test(camera.layers) === true;\n        object.element.style.display = visible === true ? '' : 'none';\n\n        if (visible === true) {\n          object.onBeforeRender(_this, scene, camera);\n          const element = object.element;\n          element.style.transform = 'translate(-50%,-50%) translate(' + (_vector.x * _widthHalf + _widthHalf) + 'px,' + (-_vector.y * _heightHalf + _heightHalf) + 'px)';\n\n          if (element.parentNode !== domElement) {\n            domElement.appendChild(element);\n          }\n\n          object.onAfterRender(_this, scene, camera);\n        }\n\n        const objectData = {\n          distanceToCameraSquared: getDistanceToSquared(camera, object)\n        };\n        cache.objects.set(object, objectData);\n      }\n\n      for (let i = 0, l = object.children.length; i < l; i++) {\n        renderObject(object.children[i], scene, camera);\n      }\n    }\n\n    function getDistanceToSquared(object1, object2) {\n      _a.setFromMatrixPosition(object1.matrixWorld);\n\n      _b.setFromMatrixPosition(object2.matrixWorld);\n\n      return _a.distanceToSquared(_b);\n    }\n\n    function filterAndFlatten(scene) {\n      const result = [];\n      scene.traverse(function (object) {\n        if (object.isCSS2DObject) result.push(object);\n      });\n      return result;\n    }\n\n    function zOrder(scene) {\n      const sorted = filterAndFlatten(scene).sort(function (a, b) {\n        if (a.renderOrder !== b.renderOrder) {\n          return b.renderOrder - a.renderOrder;\n        }\n\n        const distanceA = cache.objects.get(a).distanceToCameraSquared;\n        const distanceB = cache.objects.get(b).distanceToCameraSquared;\n        return distanceA - distanceB;\n      });\n      const zMax = sorted.length;\n\n      for (let i = 0, l = sorted.length; i < l; i++) {\n        sorted[i].element.style.zIndex = zMax - i;\n      }\n    }\n  }\n\n}\n\nexport { CSS2DObject, CSS2DRenderer };","map":{"version":3,"names":["Matrix4","Object3D","Vector3","CSS2DObject","constructor","element","document","createElement","isCSS2DObject","style","position","userSelect","setAttribute","addEventListener","traverse","object","Element","parentNode","removeChild","copy","source","recursive","cloneNode","_vector","_viewMatrix","_viewProjectionMatrix","_a","_b","CSS2DRenderer","parameters","_this","_width","_height","_widthHalf","_heightHalf","cache","objects","WeakMap","domElement","undefined","overflow","getSize","width","height","render","scene","camera","matrixWorldAutoUpdate","updateMatrixWorld","parent","matrixWorldInverse","multiplyMatrices","projectionMatrix","renderObject","zOrder","setSize","setFromMatrixPosition","matrixWorld","applyMatrix4","visible","z","layers","test","display","onBeforeRender","transform","x","y","appendChild","onAfterRender","objectData","distanceToCameraSquared","getDistanceToSquared","set","i","l","children","length","object1","object2","distanceToSquared","filterAndFlatten","result","push","sorted","sort","a","b","renderOrder","distanceA","get","distanceB","zMax","zIndex"],"sources":["/Users/ludvigbergsaker/Documents/Notify/notify_custom/notify_custom/node_modules/three/examples/jsm/renderers/CSS2DRenderer.js"],"sourcesContent":["import {\n\tMatrix4,\n\tObject3D,\n\tVector3\n} from 'three';\n\nclass CSS2DObject extends Object3D {\n\n\tconstructor( element = document.createElement( 'div' ) ) {\n\n\t\tsuper();\n\n\t\tthis.isCSS2DObject = true;\n\n\t\tthis.element = element;\n\n\t\tthis.element.style.position = 'absolute';\n\t\tthis.element.style.userSelect = 'none';\n\n\t\tthis.element.setAttribute( 'draggable', false );\n\n\t\tthis.addEventListener( 'removed', function () {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n}\n\n//\n\nconst _vector = new Vector3();\nconst _viewMatrix = new Matrix4();\nconst _viewProjectionMatrix = new Matrix4();\nconst _a = new Vector3();\nconst _b = new Vector3();\n\nclass CSS2DRenderer {\n\n\tconstructor( parameters = {} ) {\n\n\t\tconst _this = this;\n\n\t\tlet _width, _height;\n\t\tlet _widthHalf, _heightHalf;\n\n\t\tconst cache = {\n\t\t\tobjects: new WeakMap()\n\t\t};\n\n\t\tconst domElement = parameters.element !== undefined ? parameters.element : document.createElement( 'div' );\n\n\t\tdomElement.style.overflow = 'hidden';\n\n\t\tthis.domElement = domElement;\n\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tif ( scene.matrixWorldAutoUpdate === true ) scene.updateMatrixWorld();\n\t\t\tif ( camera.parent === null && camera.matrixWorldAutoUpdate === true ) camera.updateMatrixWorld();\n\n\t\t\t_viewMatrix.copy( camera.matrixWorldInverse );\n\t\t\t_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n\t\t\trenderObject( scene, scene, camera );\n\t\t\tzOrder( scene );\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\n\t\t};\n\n\t\tfunction renderObject( object, scene, camera ) {\n\n\t\t\tif ( object.isCSS2DObject ) {\n\n\t\t\t\t_vector.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t_vector.applyMatrix4( _viewProjectionMatrix );\n\n\t\t\t\tconst visible = ( object.visible === true ) && ( _vector.z >= - 1 && _vector.z <= 1 ) && ( object.layers.test( camera.layers ) === true );\n\t\t\t\tobject.element.style.display = ( visible === true ) ? '' : 'none';\n\n\t\t\t\tif ( visible === true ) {\n\n\t\t\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\t\t\tconst element = object.element;\n\n\t\t\t\t\telement.style.transform = 'translate(-50%,-50%) translate(' + ( _vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - _vector.y * _heightHalf + _heightHalf ) + 'px)';\n\n\t\t\t\t\tif ( element.parentNode !== domElement ) {\n\n\t\t\t\t\t\tdomElement.appendChild( element );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t\t\t}\n\n\t\t\t\tconst objectData = {\n\t\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\n\t\t\t\t};\n\n\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( object.children[ i ], scene, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction getDistanceToSquared( object1, object2 ) {\n\n\t\t\t_a.setFromMatrixPosition( object1.matrixWorld );\n\t\t\t_b.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn _a.distanceToSquared( _b );\n\n\t\t}\n\n\t\tfunction filterAndFlatten( scene ) {\n\n\t\t\tconst result = [];\n\n\t\t\tscene.traverse( function ( object ) {\n\n\t\t\t\tif ( object.isCSS2DObject ) result.push( object );\n\n\t\t\t} );\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfunction zOrder( scene ) {\n\n\t\t\tconst sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\t\t\treturn b.renderOrder - a.renderOrder;\n\n\t\t\t\t}\n\n\t\t\t\tconst distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\t\tconst distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\t\treturn distanceA - distanceB;\n\n\t\t\t} );\n\n\t\t\tconst zMax = sorted.length;\n\n\t\t\tfor ( let i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { CSS2DObject, CSS2DRenderer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}